<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cognitive Learning Style Questionnaire</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f6f8; padding: 20px; }
        .box { max-width: 650px; background: white; padding: 25px; margin: auto; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; }
        .question { margin-top: 20px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        button { margin-top: 25px; width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #0056b3; }
        #result { margin-top: 25px; padding: 15px; background: #e9f5ff; border-radius: 5px; font-weight: bold; display: none; }
    </style>
</head>
<body>

<div class="box">
    <h2>Cognitive Learning Style Questionnaire</h2>
    <form id="quiz-form">
        <div id="questions-container"></div>
        <button type="button" id="submit-btn">See My Learning Style</button>
    </form>
    <div id="result"></div>
</div>

<script type="module">
    import { surveyQuestions } from './questions.js';

    const container = document.getElementById('questions-container');
    const resultDiv = document.getElementById('result');

    // 1. GENERATE THE INTERFACE FROM DATA
    surveyQuestions.forEach((q, index) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question';
        qDiv.innerHTML = `<p><strong>${index + 1}. ${q.text}</strong></p>`;
        
        for (const [style, text] of Object.entries(q.options)) {
            qDiv.innerHTML += `
                <label style="display: block; margin-bottom: 5px; cursor: pointer;">
                    <input type="radio" name="q${q.id}" value="${style}" required> ${text}
                </label>`;
        }
        container.appendChild(qDiv);
    });

    // 2. CALCULATE RESULTS LOGIC
    document.getElementById('submit-btn').addEventListener('click', () => {
        const answers = document.querySelectorAll('input[type="radio"]:checked');
        
        if (answers.length < surveyQuestions.length) {
            alert(`Please answer all ${surveyQuestions.length} questions.`);
            return;
        }

        let scores = { visual: 0, auditory: 0, interpersonal: 0, independent: 0 };
        answers.forEach(a => scores[a.value]++);

        const maxScore = Math.max(...Object.values(scores));
        let dominantStyles = [];
        if (scores.visual === maxScore) dominantStyles.push("Visual Learner üìä");
        if (scores.auditory === maxScore) dominantStyles.push("Auditory Learner üéß");
        if (scores.interpersonal === maxScore) dominantStyles.push("Interpersonal Learner ü§ù");
        if (scores.independent === maxScore) dominantStyles.push("Independent Learner üìö");

        resultDiv.style.display = "block";
        resultDiv.innerHTML = dominantStyles.length === 1 
            ? "Your dominant style is:<br><br>" + dominantStyles[0]
            : "You have multiple dominant styles:<br><br>" + dominantStyles.join("<br>");
        
        resultDiv.scrollIntoView({ behavior: 'smooth' });
    });
</script>

</body>
</html>